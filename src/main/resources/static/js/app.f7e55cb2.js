(function(t){function e(e){for(var r,o,i=e[0],s=e[1],c=e[2],p=0,l=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&l.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);d&&d(e);while(l.length)l.shift()();return u.push.apply(u,c||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(u.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a={app:0},u=[];function i(t){return s.p+"js/"+({chat:"chat",home:"home",settings:"settings"}[t]||t)+"."+{chat:"74940d48","chunk-2d0aaf16":"d1063bf4","chunk-2d0b8e12":"81b1d400","chunk-563a8e64":"283d52c6","chunk-6e4c87f4":"80aaf33a","chunk-7441421a":"dfd2807c","chunk-e9460062":"bb766240",home:"0c912ea8",settings:"1de6b51d"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={chat:1,"chunk-563a8e64":1,"chunk-6e4c87f4":1,"chunk-7441421a":1,"chunk-e9460062":1,home:1,settings:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var r="css/"+({chat:"chat",home:"home",settings:"settings"}[t]||t)+"."+{chat:"ea2e43cd","chunk-2d0aaf16":"31d6cfe0","chunk-2d0b8e12":"31d6cfe0","chunk-563a8e64":"a3dff4dd","chunk-6e4c87f4":"40281f4b","chunk-7441421a":"4ff46195","chunk-e9460062":"4ab94a74",home:"57b70143",settings:"712e8a77"}[t]+".css",a=s.p+r,u=document.getElementsByTagName("link"),i=0;i<u.length;i++){var c=u[i],p=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(p===r||p===a))return e()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){c=l[i],p=c.getAttribute("data-href");if(p===r||p===a)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||a,u=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete o[t],d.parentNode.removeChild(d),n(u)},d.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){o[t]=0})));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var u=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=u);var c,p=document.createElement("script");p.charset="utf-8",p.timeout=120,s.nc&&p.setAttribute("nonce",s.nc),p.src=i(t);var l=new Error;c=function(e){p.onerror=p.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}a[t]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:p})}),12e4);p.onerror=p.onload=c,document.head.appendChild(p)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],p=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=p;u.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0236":function(t,e,n){},"079b":function(t,e,n){"use strict";var r=n("f50c"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("div",{staticClass:"row"},t._l(t.routes,(function(e,r){return n("router-link",{key:r,attrs:{to:e.path}},[t._v(" "+t._s(e.name)+" ")])})),1),t.loggedIn?n("b-button",{on:{click:t.logOut}},[t._v("Log out")]):t._e()],1),n("router-view"),n("b-modal",{attrs:{id:"modal",scrollable:""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(t._s(t.modalTitle.split("-").join(" ")))]},proxy:!0},{key:"modal-footer",fn:function(){return[n("div")]},proxy:!0}])},[n(t.modal,{tag:"component",attrs:{modalProps:t.modalProps}})],1),n("div",{staticClass:"alerts"},t._l(t.alerts,(function(e,r){return n("div",{key:r,class:["alerts__item","alerts__item--"+e.type]},[t._v(" "+t._s(e.text)+" ")])})),0)],1)},a=[],u=(n("b0c0"),n("96cf"),n("1da1")),i=n("5530"),s=(n("99af"),n("45fc"),n("d3b7"),n("8c4f")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"col mx-auto",attrs:{name:"sign in"},on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[n("b-form-group",[n("label",{attrs:{for:"email"}},[t._v("Email:")]),n("b-input",{directives:[{name:"autofocus",rawName:"v-autofocus"}],ref:"email",staticClass:"input-field",attrs:{type:"email",name:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("b-form-group",[n("label",{attrs:{for:"password"}},[t._v("Password:")]),n("b-input",{ref:"password",attrs:{type:"password",name:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("b-button",{ref:"submit",attrs:{type:"submit",variant:"primary"}},[t._v(" Sign In ")])],1)},p=[],l={data:function(){return{email:"",password:""}},methods:{submitForm:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("user/logIn",{email:t.email,password:t.password});case 3:t.$router.push({name:"Home"}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t.$alert.display(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},d=l,f=(n("079b"),n("2877")),m=Object(f["a"])(d,c,p,!1,null,"66881b88",null),h=m.exports,g=n("2f62"),v=(n("7db0"),n("c740"),n("a434"),n("2909")),b=(n("4160"),n("b64b"),n("159b"),function(t,e){var n=Object.keys(e);n.forEach((function(n){t.hasOwnProperty(n)&&(t[n]=e[n])}))}),y=n("bc3a"),w=n.n(y),_=function(t){return function(e){return t({method:"post",url:"/api/login",data:e})}},k=function(t){return function(){return t({method:"get",url:"/api/logout"})}},x=function(t){return function(){return t({method:"get",url:"/api/me"})}},E=function(t){return function(e){return t({method:"post",url:"/api/layouts/single",data:e})}},O=function(t){return function(e){return t({method:"post",url:"/api/layouts/edit",data:e})}},T=function(t){return function(e){return t({method:"delete",url:"/api/layouts/".concat(e)})}},R=function(t){return{logIn:_(t),createLayout:E(t),editLayout:O(t),deleteLayout:T(t),getData:x(t),logOut:k(t)}},S=function(t){return function(e,n){return t({method:"get",url:"/api/group/".concat(e,"?size=5&page=").concat(n)})}},A=function(t){return function(e){return t({method:"post",url:"/api/group/new",data:e})}},C=function(t){return function(){return t({method:"get",url:"/api"})}},P=function(t){return function(e){return t({method:"get",url:"/api/group?search=".concat(e)})}},j=function(t){return function(e){return t({method:"get",url:"/api/group/invite?id=".concat(e.inviteCode)})}},I=function(t){return function(e){return t({method:"post",url:"/api/group",data:e})}},L=function(t){return function(e){var n=e.form,r=e.inviteCode;return t({method:"post",url:"/api/group/invite/participant?id=".concat(r),data:n})}},$=function(t){return function(e){return t({method:"get",url:"/api/group/".concat(e,"/participants")})}},D=function(t){return function(e){return t({method:"get",url:"/api/group/".concat(e,"/forms")})}},G=function(t){return function(e,n){return t({method:"post",url:"/api/group/".concat(e,"/forms"),data:n})}},N=function(t){return function(e){return t({method:"delete",url:"/api/group/".concat(e,"/leave")})}},M=function(t){return{getPosts:S(t),create:A(t),getGroups:C(t),findGroups:P(t),join:j(t),addPost:I(t),submitJoinForm:L(t),getParticipants:$(t),getJoinRequests:D(t),acceptRequests:G(t),leave:N(t)}},U=function(t){return function(){return t({method:"get",url:"/api/message/conversations"})}},V=function(t){return function(e){return t({method:"get",url:"/api/message/".concat(e)})}},F=function(t){return function(e){return t({method:"post",url:"/api/message/add",data:e})}},B=function(t){return{getExistingConversations:U(t),getConversationMessages:V(t),addParticipant:F(t)}},Y=function(t){return{user:R(t),group:M(t),chat:B(t)}},J=Y(w.a),q=n("cc7d"),H=n.n(q),W=n("8030"),z=function(t){var e=new H.a("/websocketApp"),n=W["a"].over(e);return n.connect({},(function(){return K(n,t)})),n},K=function(t,e){t.subscribe("/topic/".concat(e),Q)},Q=function(t){var e=JSON.parse(t.body),n=e.type;switch(n){case"NEW":xt.commit("chats/CREATE_CONVERSATION",e);break;case"CHAT":xt.commit("chats/ADD_MESSAGE",e);break;case"GROUP":xt.dispatch("user/refreshGroup",e.id);break;case"CONVERSATION":xt.commit("chats/ADD_NEW_PARTICIPANT",e);break;default:break}},X={connect:z},Z={loggedIn:!1,token:null,id:null,groups:null},tt={SET_STATE:function(t,e){b(t,e)},SET_STATUS:function(t,e){t.loggedIn=e},ADD_POSTS:function(t,e){var n,r=e.id,o=e.data;(n=t.groups.find((function(t){return t.group.id===r})).posts).push.apply(n,Object(v["a"])(o))},REFRESH_GROUP:function(t,e){var n=e.id,r=e.data;t.groups.find((function(t){return t.group.id===n})).posts=r},REMOVE_GROUP:function(t,e){var n=t.groups.findIndex((function(t){return t.group.id===e}));n>=0&&t.groups.splice(n,1)}},et=function(t){return{logIn:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o,a,u,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,a=e.dispatch,r.prev=1,r.next=4,t.user.logIn(n);case 4:return u=r.sent,i=u.data,s=i.layouts,o("SET_STATUS",!0),o("SET_STATE",i),o("settings/SET_STATE",{layouts:s},{root:!0}),r.next=12,a("socketConnection",i.id);case 12:return r.abrupt("return",Promise.resolve());case 15:return r.prev=15,r.t0=r["catch"](1),r.abrupt("return",Promise.reject(r.t0));case 18:case"end":return r.stop()}}),r,null,[[1,15]])})))()},fetchUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o,a,u,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=e.dispatch,n.prev=1,n.next=4,t.user.getData();case 4:return a=n.sent,u=a.data,i=u.layouts,r("SET_STATUS",!0),r("SET_STATE",u),r("settings/SET_STATE",{layouts:i},{root:!0}),n.next=12,o("fetchGroups");case 12:return n.next=14,o("socketConnection",u.id);case 14:return n.abrupt("return",Promise.resolve());case 17:return n.prev=17,n.t0=n["catch"](1),n.abrupt("return",Promise.reject(n.t0));case 20:case"end":return n.stop()}}),n,null,[[1,17]])})))()},fetchGroups:function(e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,t.group.getGroups();case 4:o=n.sent,a=o.data,r("SET_STATE",{groups:a}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},fetchPosts:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o,a,u,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,a=n.id,u=n.page,r.prev=2,r.next=5,t.group.getPosts(a,u);case 5:i=r.sent,s=i.data,u<s.totalPages&&o("ADD_POSTS",{data:s.content,id:a}),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](2),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},refreshGroup:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o,a,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,r.prev=1,r.next=4,t.group.getPosts(n,1);case 4:a=r.sent,u=a.data,o("REFRESH_GROUP",{data:u.content,id:n}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},socketConnection:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit;try{o=X.connect(e),r("chats/SET_STATE",{stompClient:o},{root:!0})}catch(a){console.log(a)}case 2:case"end":return n.stop()}}),n)})))()},leaveGroup:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,a=e.dispatch,r.prev=1,r.next=4,t.group.leave(n);case 4:return r.next=6,a("settings/removeGroupFromLayouts",n,{root:!0});case 6:o("REMOVE_GROUP",n),r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](1);case 11:case"end":return r.stop()}}),r,null,[[1,9]])})))()}}},nt={getGroup:function(t){return function(e){return t.groups.find((function(t){return t.group.id===e}))}},loggedIn:function(t){return t.loggedIn}},rt={state:Z,mutations:tt,actions:et(J),getters:nt,namespaced:!0},ot=(n("d81d"),n("3ca3"),n("ddb0"),{activeLayout:null,layouts:[]}),at={SET_STATE:function(t,e){b(t,e)},ADD_LAYOUT:function(t,e){t.layouts.push(e)},SET_ACTIVE_LAYOUT:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.activeLayout=e},DELETE_LAYOUT:function(t,e){var n=t.layouts.findIndex((function(t){return t.name===e}));n>=0&&t.layouts.splice(n,1)},REMOVE_GROUP_FROM_LAYOUT:function(t,e){var n=e.id,r=e.index,o=t.layouts[r].groups.findIndex((function(t){return t.i===n}));o>=0&&t.layouts[r].groups.splice(o,1)}},ut=function(t){return{createLayout:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,r.prev=1,r.next=4,t.user.createLayout(n);case 4:o("ADD_LAYOUT",n),o("SET_ACTIVE_LAYOUT"),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),console.log(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},deleteLayout:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,r.prev=1,r.next=4,t.user.deleteLayout(n);case 4:o("DELETE_LAYOUT",n),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[1,7]])})))()},editLayout:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit,r.prev=1,r.next=4,t.user.editLayout(n);case 4:r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](1),console.log(r.t0);case 9:case"end":return r.stop()}}),r,null,[[1,6]])})))()},removeGroupFromLayouts:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o,a,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.state,o=t.commit,a=t.dispatch,n.prev=1,u=r.layouts.map((function(t,n){return t.groups.findIndex((function(t){return t.i===e})),o("REMOVE_GROUP_FROM_LAYOUT",{id:e,index:n}),a("editLayout",t)})),n.next=5,Promise.all(u);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}},it={getActiveLayout:function(t){return t.layouts.length&&null!==t.activeLayout?t.layouts[t.activeLayout]:{name:"",groups:[]}}},st={state:ot,mutations:at,actions:ut(J),getters:it,namespaced:!0},ct=n("d4ec"),pt=function t(e){var n=e.participantId,r=e.content;Object(ct["a"])(this,t),this.participantId=n,this.content=r},lt=(n("a15b"),n("13d5"),n("fb6a"),n("bee2")),dt=function(){function t(e){var n=e.id,r=e.participantId,o=e.participants,a=e.messages,u=void 0===a?[]:a,i=e.groupId,s=e.name;Object(ct["a"])(this,t),this.id=n,this.user=r,this.userList=this._mapUsersToObject(o),this.content=u,this.groupId=i,this.name=s||this._mapName(o)}return Object(lt["a"])(t,[{key:"_mapUsersToObject",value:function(t){return t.reduce((function(t,e){return t[e.id]=e.nickname,t}),{})}},{key:"_mapName",value:function(t){var e=t.map((function(t){return t.nickname})).join(", ");return e.length>20?e.slice(0,20)+"...":e}}]),t}(),ft={conversations:[],openConversations:{},stompClient:null,existingConversations:[]},mt={SET_STATE:function(t,e){b(t,e)},CREATE_CONVERSATION:function(t,e){t.openConversations[e.id]||(t.conversations.push(new dt(e)),t.openConversations[e.id]=!0)},CLOSE_CONVERSATION:function(t,e){var n=t.conversations.findIndex((function(t){return t.id===e}));t.conversations.splice(n,1),delete t.openConversations[e]},ADD_MESSAGE:function(t,e){var n=t.conversations.findIndex((function(t){return t.id===e.id}));t.conversations[n].content.push(new pt(e))},ADD_NEW_PARTICIPANT:function(t,e){var n=t.conversations.findIndex((function(t){return t.id===e.id}));if(n>=0){t.conversations[n].userList[e.participantId]=e.nickname;var r=JSON.parse(JSON.stringify(t.conversations[n].userList));t.conversations[n].userList=r}}},ht=function(t){return{getExistingConversations:function(e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,t.chat.getExistingConversations();case 4:o=n.sent,a=o.data,r("SET_STATE",{existingConversations:a}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()}}},gt={isOpen:function(t){return function(e){return t.openConversations[e]||!1}}},vt={state:ft,mutations:mt,actions:ht(J),getters:gt,namespaced:!0},bt={alerts:[]},yt={SET_STATE:function(t,e){b(t,e)},ADD_ALERT:function(t,e){t.alerts.push(e)},REMOVE_ALERT:function(t,e){t.alerts.splice(e,1)}},wt={display:function(t,e){var n=t.commit;return new Promise((function(t){n("ADD_ALERT",e),setTimeout((function(){n("REMOVE_ALERT",e),t()}),1500)}))}},_t={},kt={state:bt,mutations:yt,actions:wt,getters:_t,namespaced:!0};r["default"].use(g["a"]);var xt=new g["a"].Store({state:{},mutations:{},actions:{},modules:{user:rt,settings:st,chats:vt,alert:kt}});r["default"].use(s["a"]);var Et=[{path:"/login",name:"Log in",component:h}],Ot=[{path:"/chat",name:"Chat",component:function(){return n.e("chat").then(n.bind(null,"c98b"))},meta:{auth:!0}},{path:"/",name:"Home",component:function(){return n.e("home").then(n.bind(null,"bb51"))},meta:{auth:!0}},{path:"/settings",name:"Settings",component:function(){return n.e("settings").then(n.bind(null,"26d3"))},meta:{auth:!0}}],Tt=new s["a"]({mode:"hash",base:"/",routes:[].concat(Ot,Et)});Tt.beforeEach(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("/login"!==e.path||!xt.getters["user/loggedIn"]){t.next=2;break}return t.abrupt("return",r(!1));case 2:if(!e.matched.some((function(t){return t.meta.auth&&!xt.getters["user/loggedIn"]}))){t.next=6;break}return t.next=5,Rt(xt,r);case 5:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",r());case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}());var Rt=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("user/fetchUser");case 3:n(),t.next=9;break;case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",n({path:"/login"}));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),St=Tt,At={data:function(){return{modal:null,modalProps:{},modalTitle:""}},computed:Object(i["a"])(Object(i["a"])({},Object(g["b"])({alerts:function(t){return t.alert.alerts}})),{},{routes:function(){return this.loggedIn?Ot:[]},loggedIn:function(){return this.$store.getters["user/loggedIn"]}}),mounted:function(){this.$eventBus.$on("open-modal",this.openModalWindow),this.$eventBus.$on("close-modal",this.closeModal)},beforeDestroy:function(){this.$eventBus.$off("open-modal",this.openModalWindow),this.$eventBus.$off("close-modal",this.closeModal)},methods:{openModalWindow:function(t){var e=this,n=t.component,r=t.props;n().then((function(t){return e.modalTitle=t.default.name})),this.modalProps=r,this.modal=n,this.$bvModal.show("modal")},closeModal:function(){this.$bvModal.hide("modal"),this.modal=null},logOut:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.user.logOut();case 3:return e.next=5,t.$alert.display({type:"success",text:"logged out successfuly"});case 5:location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}},Ct=At,Pt=(n("5c0b"),Object(f["a"])(Ct,o,a,!1,null,null,null)),jt=Pt.exports,It=n("7be8"),Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group",style:{background:t.group.color}},[n("div",{staticClass:"group__toolbar py-2 px-2"},[n("h5",[t._v(t._s(t.group.name)+" | "+t._s(t.user.nickname))]),n("div",[n("b-button-group",[t.isAdmin?n("b-button",{staticClass:"settings",attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.openSettings(t.group)}}},[t._v(" settings ")]):t._e(),n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.refresh(e)}}},[t._v("refresh")])],1)],1)]),n("form",{staticClass:"mt-2 mx-3",on:{submit:function(e){return e.preventDefault(),t.addPost(e)}}},[n("b-input-group",[n("b-input",{attrs:{type:"text"},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}}),n("div",{staticClass:"input-group-append"},[n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Add post")])],1)],1)],1),n("section",{staticClass:"group__content mt-2"},[n("div",{staticClass:"posts"},t._l(t.posts,(function(t){return n("app-post",{key:t.id,attrs:{post:t}})})),1),n("b-button",{staticClass:"my-4 mx-auto",attrs:{variant:"primary"},on:{click:t.loadPosts}},[t._v("Load more")])],1)])},$t=[],Dt=(n("a9e3"),{props:{id:{type:[String,Number],required:!0}},data:function(){return{page:2,post:null}},computed:{group:function(){return this.$store.getters["user/getGroup"](this.id).group},user:function(){return this.$store.getters["user/getGroup"](this.id)},posts:function(){return this.$store.getters["user/getGroup"](this.id).posts},participantId:function(){return this.$store.getters["user/getGroup"](this.id).participantId},isAdmin:function(){return this.$store.getters["user/getGroup"](this.id).group.creatorId===this.participantId}},created:function(){this.post=this.createNewPost()},methods:{createNewPost:function(){return{groupId:this.id,participantId:this.participantId,content:""}},addPost:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.group.addPost(t.post);case 3:t.post=t.createNewPost(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t.$alert.display(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},openSettings:function(t){this.openModal("groupSettings",t)},loadPosts:function(){try{this.$store.dispatch("user/fetchPosts",{id:this.id,page:this.page}),this.page++}catch(t){this.$alert.display(t)}},refresh:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("user/refreshGroup",t.id);case 1:case"end":return e.stop()}}),e)})))()}}}),Gt=Dt,Nt=(n("fa26"),Object(f["a"])(Gt,Lt,$t,!1,null,"345ad44a",null)),Mt=Nt.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post col"},[n("h5",{staticClass:"text-left"},[t._v(t._s(t.post.author.nickname))]),n("p",{staticClass:"text-left"},[t._v(t._s(t.post.content))])])},Vt=[],Ft={props:{post:{type:Object,required:!0}},methods:{react:function(){}}},Bt=Ft,Yt=(n("d0fa"),Object(f["a"])(Bt,Ut,Vt,!1,null,"30e9aeda",null)),Jt=Yt.exports;r["default"].component("grid-layout",It["GridLayout"]),r["default"].component("grid-item",It["GridItem"]),r["default"].component("app-group",Mt),r["default"].component("app-post",Jt);var qt={addGroup:function(){return n.e("chunk-2d0aaf16").then(n.bind(null,"12ba"))},createGroup:function(){return n.e("chunk-2d0b8e12").then(n.bind(null,"3120"))},createLayout:function(){return n.e("chunk-6e4c87f4").then(n.bind(null,"e05c"))},findGroup:function(){return n.e("chunk-563a8e64").then(n.bind(null,"adbf"))},groupSettings:function(){return n.e("chunk-e9460062").then(n.bind(null,"065f"))},conversationSettings:function(){return n.e("chunk-7441421a").then(n.bind(null,"8b68"))}};function Ht(t){return{methods:{openModal:function(e,n){this.$eventBus.$emit("open-modal",{component:t[e],props:n})}}}}var Wt=Ht(qt);r["default"].mixin(Wt);var zt={inserted:function(t){t.focus()}};r["default"].directive("autofocus",zt);var Kt=n("5f5b"),Qt=n("b1e0"),Xt=n("123d"),Zt=n.n(Xt),te=function(t,e){return function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(403!==n.status){t.next=5;break}e.dispatch("alert/display",{type:"error",text:"you are not authenticated. log in"}),location.reload(),t.next=6;break;case 5:return t.abrupt("return",e.dispatch("alert/display",n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ee={display:te(J,xt)};n("f9e3"),n("2dd8");r["default"].use(Kt["a"]),r["default"].use(Qt["a"]),r["default"].use(Zt.a),r["default"].config.productionTip=!1,r["default"].prototype.$eventBus=new r["default"],r["default"].prototype.$http=J,r["default"].prototype.$alert=ee,new r["default"]({router:St,store:xt,render:function(t){return t(jt)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("9c0c"),o=n.n(r);o.a},"9c0c":function(t,e,n){},c5fe:function(t,e,n){},d0fa:function(t,e,n){"use strict";var r=n("0236"),o=n.n(r);o.a},f50c:function(t,e,n){},fa26:function(t,e,n){"use strict";var r=n("c5fe"),o=n.n(r);o.a}});
//# sourceMappingURL=app.f7e55cb2.js.map