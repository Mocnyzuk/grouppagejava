(function(t){function e(e){for(var r,o,s=e[0],c=e[1],i=e[2],p=0,l=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&l.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(l.length)l.shift()();return u.push.apply(u,i||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(u.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},o={app:0},a={app:0},u=[];function s(t){return c.p+"js/"+({chat:"chat",home:"home",settings:"settings"}[t]||t)+"."+{chat:"c3720df0","chunk-2d0aaf16":"6b7e7434","chunk-2d0b8e12":"1c18528f","chunk-31c4cf80":"cb1133f5","chunk-3281e516":"18327731","chunk-5082a409":"5853d3c8","chunk-6d494acc":"a1eb2558",home:"58a444ed",settings:"2a3dedbd"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={chat:1,"chunk-31c4cf80":1,"chunk-3281e516":1,"chunk-5082a409":1,"chunk-6d494acc":1,home:1,settings:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var r="css/"+({chat:"chat",home:"home",settings:"settings"}[t]||t)+"."+{chat:"3aefcbb1","chunk-2d0aaf16":"31d6cfe0","chunk-2d0b8e12":"31d6cfe0","chunk-31c4cf80":"888bd38a","chunk-3281e516":"ab53f64b","chunk-5082a409":"81f14fff","chunk-6d494acc":"b404fd24",home:"eae65f16",settings:"7bfff7dc"}[t]+".css",a=c.p+r,u=document.getElementsByTagName("link"),s=0;s<u.length;s++){var i=u[s],p=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(p===r||p===a))return e()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){i=l[s],p=i.getAttribute("data-href");if(p===r||p===a)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||a,u=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete o[t],d.parentNode.removeChild(d),n(u)},d.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){o[t]=0})));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var u=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=u);var i,p=document.createElement("script");p.charset="utf-8",p.timeout=120,c.nc&&p.setAttribute("nonce",c.nc),p.src=s(t);var l=new Error;i=function(e){p.onerror=p.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}a[t]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:p})}),12e4);p.onerror=p.onload=i,document.head.appendChild(p)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],p=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var d=p;u.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0949":function(t,e,n){},1901:function(t,e,n){"use strict";var r=n("7a67"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"row",attrs:{id:"nav"}},[n("div",{staticClass:"row"},t._l(t.routes,(function(e,r){return n("router-link",{key:r,attrs:{to:e.path}},[t._v(" "+t._s(e.name)+" ")])})),1),t.loggedIn?n("button",{on:{click:t.logOut}},[t._v("log out")]):t._e()]),n("router-view",{staticClass:"main"}),t.modalOpen?n("div",{staticClass:"modal col"},[n("button",{staticClass:"modal__close",on:{click:t.closeModal}},[t._v("X")]),n(t.modal,{tag:"component",staticClass:"modal__window",attrs:{modalProps:t.modalProps}})],1):t._e(),n("div",{staticClass:"alerts"},t._l(t.alerts,(function(e,r){return n("div",{key:r,class:["alerts__item","alerts__item--"+e.type]},[t._v(" "+t._s(e.text)+" ")])})),0)],1)},a=[],u=(n("96cf"),n("1da1")),s=n("5530"),c=(n("99af"),n("45fc"),n("d3b7"),n("8c4f")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"col",attrs:{name:"sign in"},on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[n("section",{staticClass:"col"},[n("label",{attrs:{for:""}},[t._v("Email:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"},{name:"autofocus",rawName:"v-autofocus"}],ref:"email",attrs:{type:"email",name:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("section",{staticClass:"col"},[n("label",{attrs:{for:""}},[t._v("Password:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",attrs:{type:"password",name:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("button",{ref:"submit",attrs:{type:"submit"}},[t._v("Sign In")])])},p=[],l={data:function(){return{email:"",password:""}},methods:{submitForm:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("user/logIn",{email:t.email,password:t.password});case 3:t.$router.push({name:"Home"}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t.$alert.display(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},d=l,f=(n("1901"),n("2877")),m=Object(f["a"])(d,i,p,!1,null,"039f4a36",null),h=m.exports,g=n("2f62"),v=(n("7db0"),n("c740"),n("a434"),n("2909")),b=(n("4160"),n("b64b"),n("159b"),function(t,e){var n=Object.keys(e);n.forEach((function(n){t.hasOwnProperty(n)&&(t[n]=e[n])}))}),w=n("bc3a"),_=n.n(w),y=function(t){return function(e){return t({method:"post",url:"/api/login",data:e})}},k=function(t){return function(){return t({method:"get",url:"/api/logout"})}},O=function(t){return function(){return t({method:"get",url:"/api/me"})}},x=function(t){return function(e){return t({method:"post",url:"/api/layouts/single",data:e})}},E=function(t){return function(e){return t({method:"post",url:"/api/layouts/edit",data:e})}},T=function(t){return function(e){return t({method:"delete",url:"/api/layouts/".concat(e)})}},R=function(t){return{logIn:y(t),createLayout:x(t),editLayout:E(t),deleteLayout:T(t),getData:O(t),logOut:k(t)}},S=function(t){return function(e,n){return t({method:"get",url:"/api/group/".concat(e,"?size=5&page=").concat(n)})}},A=function(t){return function(e){return t({method:"post",url:"/api/group/new",data:e})}},C=function(t){return function(){return t({method:"get",url:"/api"})}},P=function(t){return function(e){return t({method:"get",url:"/api/group?search=".concat(e)})}},j=function(t){return function(e){return t({method:"get",url:"/api/group/invite?id=".concat(e.inviteCode)})}},I=function(t){return function(e){return t({method:"post",url:"/api/group",data:e})}},L=function(t){return function(e){var n=e.form,r=e.inviteCode;return t({method:"post",url:"/api/group/invite/participant?id=".concat(r),data:n})}},$=function(t){return function(e){return t({method:"get",url:"/api/group/".concat(e,"/participants")})}},D=function(t){return function(e){return t({method:"get",url:"/api/group/".concat(e,"/forms")})}},G=function(t){return function(e,n){return t({method:"post",url:"/api/group/".concat(e,"/forms"),data:n})}},N=function(t){return function(e){return t({method:"delete",url:"/api/group/".concat(e,"/leave")})}},M=function(t){return{getPosts:S(t),create:A(t),getGroups:C(t),findGroups:P(t),join:j(t),addPost:I(t),submitJoinForm:L(t),getParticipants:$(t),getJoinRequests:D(t),acceptRequests:G(t),leave:N(t)}},U=function(t){return function(){return t({method:"get",url:"/api/message/conversations"})}},V=function(t){return function(e){return t({method:"get",url:"/api/message/".concat(e)})}},F=function(t){return function(e){return t({method:"post",url:"/api/message/add",data:e})}},B=function(t){return{getExistingConversations:U(t),getConversationMessages:V(t),addParticipant:F(t)}},Y=function(t){return{user:R(t),group:M(t),chat:B(t)}},J=Y(_.a),q=n("cc7d"),H=n.n(q),W=n("8030"),z=function(t){var e=new H.a("http://localhost:8080/websocketApp"),n=W["a"].over(e);return n.connect({},(function(){return K(n,t)})),n},K=function(t,e){t.subscribe("/topic/".concat(e),X)},X=function(t){var e=JSON.parse(t.body),n=e.type;switch(n){case"NEW":kt.commit("chats/CREATE_CONVERSATION",e);break;case"CHAT":kt.commit("chats/ADD_MESSAGE",e);break;case"GROUP":kt.dispatch("user/refreshGroup",e.id);break;case"CONVERSATION":kt.commit("chats/ADD_NEW_PARTICIPANT",e);break;default:break}},Q={connect:z},Z={loggedIn:!1,token:null,id:null,groups:null},tt={SET_STATE:function(t,e){b(t,e)},SET_STATUS:function(t,e){t.loggedIn=e},ADD_POSTS:function(t,e){var n,r=e.id,o=e.data;(n=t.groups.find((function(t){return t.group.id===r})).posts).push.apply(n,Object(v["a"])(o))},REFRESH_GROUP:function(t,e){var n=e.id,r=e.data;t.groups.find((function(t){return t.group.id===n})).posts=r},REMOVE_GROUP:function(t,e){var n=t.groups.findIndex((function(t){return t.group.id===e}));n>=0&&t.groups.splice(n,1)}},et=function(t){return{logIn:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o,a,u,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,a=e.dispatch,r.prev=1,r.next=4,t.user.logIn(n);case 4:return u=r.sent,s=u.data,c=s.layouts,o("SET_STATUS",!0),o("SET_STATE",s),o("settings/SET_STATE",{layouts:c},{root:!0}),r.next=12,a("socketConnection",s.id);case 12:return r.abrupt("return",Promise.resolve());case 15:return r.prev=15,r.t0=r["catch"](1),r.abrupt("return",Promise.reject(r.t0));case 18:case"end":return r.stop()}}),r,null,[[1,15]])})))()},fetchUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o,a,u,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=e.dispatch,n.prev=1,n.next=4,t.user.getData();case 4:return a=n.sent,u=a.data,s=u.layouts,r("SET_STATUS",!0),r("SET_STATE",u),r("settings/SET_STATE",{layouts:s},{root:!0}),n.next=12,o("fetchGroups");case 12:return n.next=14,o("socketConnection",u.id);case 14:return n.abrupt("return",Promise.resolve());case 17:return n.prev=17,n.t0=n["catch"](1),n.abrupt("return",Promise.reject(n.t0));case 20:case"end":return n.stop()}}),n,null,[[1,17]])})))()},fetchGroups:function(e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,t.group.getGroups();case 4:o=n.sent,a=o.data,r("SET_STATE",{groups:a}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},fetchPosts:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o,a,u,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,a=n.id,u=n.page,r.prev=2,r.next=5,t.group.getPosts(a,u);case 5:s=r.sent,c=s.data,u<c.totalPages&&o("ADD_POSTS",{data:c.content,id:a}),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](2),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},refreshGroup:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o,a,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,r.prev=1,r.next=4,t.group.getPosts(n,1);case 4:a=r.sent,u=a.data,o("REFRESH_GROUP",{data:u.content,id:n}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},socketConnection:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit;try{o=Q.connect(e),r("chats/SET_STATE",{stompClient:o},{root:!0})}catch(a){console.log(a)}case 2:case"end":return n.stop()}}),n)})))()},leaveGroup:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,a=e.dispatch,r.prev=1,r.next=4,t.group.leave(n);case 4:return r.next=6,a("settings/removeGroupFromLayouts",n,{root:!0});case 6:o("REMOVE_GROUP",n),r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](1);case 11:case"end":return r.stop()}}),r,null,[[1,9]])})))()}}},nt={getGroup:function(t){return function(e){return t.groups.find((function(t){return t.group.id===e}))}},loggedIn:function(t){return t.loggedIn}},rt={state:Z,mutations:tt,actions:et(J),getters:nt,namespaced:!0},ot=(n("d81d"),n("b0c0"),n("3ca3"),n("ddb0"),{activeLayout:{name:"",groups:[]},layouts:[]}),at={SET_STATE:function(t,e){b(t,e)},ADD_LAYOUT:function(t,e){t.layouts.push(e)},SET_ACTIVE_LAYOUT:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.activeLayout=t.layouts[e]},DELETE_LAYOUT:function(t,e){var n=t.layouts.findIndex((function(t){return t.name===e}));n>=0&&t.layouts.splice(n,1)},REMOVE_GROUP_FROM_LAYOUT:function(t,e){var n=e.id,r=e.index,o=t.layouts[r].groups.findIndex((function(t){return t.i===n}));o>=0&&t.layouts[r].groups.splice(o,1)}},ut=function(t){return{createLayout:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,r.prev=1,r.next=4,t.user.createLayout(n);case 4:o("ADD_LAYOUT",n),o("SET_ACTIVE_LAYOUT"),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),console.log(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},deleteLayout:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,r.prev=1,r.next=4,t.user.deleteLayout(n);case 4:o("DELETE_LAYOUT",n),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[1,7]])})))()},editLayout:function(e,n){return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit,r.prev=1,r.next=4,t.user.editLayout(n);case 4:r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](1),console.log(r.t0);case 9:case"end":return r.stop()}}),r,null,[[1,6]])})))()},removeGroupFromLayouts:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o,a,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.state,o=t.commit,a=t.dispatch,n.prev=1,u=r.layouts.map((function(t,n){return t.groups.findIndex((function(t){return t.i===e})),o("REMOVE_GROUP_FROM_LAYOUT",{id:e,index:n}),a("editLayout",t)})),n.next=5,Promise.all(u);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}},st={state:ot,mutations:at,actions:ut(J),namespaced:!0},ct=n("d4ec"),it=function t(e){var n=e.participantId,r=e.content;Object(ct["a"])(this,t),this.participantId=n,this.content=r},pt=(n("13d5"),n("bee2")),lt=function(){function t(e){var n=e.id,r=e.participantId,o=e.participants,a=e.messages,u=void 0===a?[]:a,s=e.groupId;Object(ct["a"])(this,t),this.id=n,this.user=r,this.userList=this._mapUsersToObject(o),this.content=u,this.groupId=s}return Object(pt["a"])(t,[{key:"_mapUsersToObject",value:function(t){return t.reduce((function(t,e){return t[e.id]=e.nickname,t}),{})}}]),t}(),dt={conversations:[],openConversations:{},stompClient:null,existingConversations:[]},ft={SET_STATE:function(t,e){b(t,e)},CREATE_CONVERSATION:function(t,e){t.openConversations[e.id]||(t.conversations.push(new lt(e)),t.openConversations[e.id]=!0)},CLOSE_CONVERSATION:function(t,e){var n=t.conversations.findIndex((function(t){return t.id===e}));t.conversations.splice(n,1),delete t.openConversations[e]},ADD_MESSAGE:function(t,e){var n=t.conversations.findIndex((function(t){return t.id===e.id}));t.conversations[n].content.push(new it(e))},ADD_NEW_PARTICIPANT:function(t,e){var n=t.conversations.findIndex((function(t){return t.id===e.id}));if(n>=0){t.conversations[n].userList[e.participantId]=e.nickname;var r=JSON.parse(JSON.stringify(t.conversations[n].userList));t.conversations[n].userList=r}}},mt=function(t){return{getExistingConversations:function(e){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,t.chat.getExistingConversations();case 4:o=n.sent,a=o.data,r("SET_STATE",{existingConversations:a}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()}}},ht={isOpen:function(t){return function(e){return t.openConversations[e]||!1}}},gt={state:dt,mutations:ft,actions:mt(J),getters:ht,namespaced:!0},vt={alerts:[]},bt={SET_STATE:function(t,e){b(t,e)},ADD_ALERT:function(t,e){t.alerts.push(e)},REMOVE_ALERT:function(t,e){t.alerts.splice(e,1)}},wt={display:function(t,e){var n=t.commit;return new Promise((function(t){n("ADD_ALERT",e),setTimeout((function(){n("REMOVE_ALERT",e),t()}),1500)}))}},_t={},yt={state:vt,mutations:bt,actions:wt,getters:_t,namespaced:!0};r["default"].use(g["a"]);var kt=new g["a"].Store({state:{},mutations:{},actions:{},modules:{user:rt,settings:st,chats:gt,alert:yt}});r["default"].use(c["a"]);var Ot=[{path:"/login",name:"Log in",component:h}],xt=[{path:"/chat",name:"Chat",component:function(){return n.e("chat").then(n.bind(null,"c98b"))},meta:{auth:!0}},{path:"/",name:"Home",component:function(){return n.e("home").then(n.bind(null,"bb51"))},meta:{auth:!0}},{path:"/settings",name:"Settings",component:function(){return n.e("settings").then(n.bind(null,"26d3"))},meta:{auth:!0}}],Et=new c["a"]({mode:"history",base:"/",routes:[].concat(xt,Ot)});Et.beforeEach(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("/login"!==e.path||!kt.getters["user/loggedIn"]){t.next=2;break}return t.abrupt("return",r(!1));case 2:if(!e.matched.some((function(t){return t.meta.auth&&!kt.getters["user/loggedIn"]}))){t.next=6;break}return t.next=5,Tt(kt,r);case 5:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",r());case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}());var Tt=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("user/fetchUser");case 3:n(),t.next=9;break;case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",n({path:"/login"}));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),Rt=Et,St={data:function(){return{modal:null,modalOpen:!1,modalProps:{}}},computed:Object(s["a"])(Object(s["a"])({},Object(g["b"])({alerts:function(t){return t.alert.alerts}})),{},{routes:function(){return this.loggedIn?xt:[]},loggedIn:function(){return this.$store.getters["user/loggedIn"]}}),mounted:function(){this.$eventBus.$on("open-modal",this.openModalWindow),this.$eventBus.$on("close-modal",this.closeModal)},beforeDestroy:function(){this.$eventBus.$off("open-modal",this.openModalWindow),this.$eventBus.$off("close-modal",this.closeModal)},methods:{openModalWindow:function(t){var e=t.component,n=t.props;this.modalProps=n,this.modal=e,this.modalOpen=!0},closeModal:function(){this.modal=null,this.modalOpen=!1},logOut:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.user.logOut();case 3:return e.next=5,t.$alert.display({type:"success",text:"logged out successfuly"});case 5:location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}},At=St,Ct=(n("5c0b"),Object(f["a"])(At,o,a,!1,null,null,null)),Pt=Ct.exports,jt=n("7be8"),It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group col",style:{background:t.group.color}},[n("div",{staticClass:"row group__toolbar"},[n("h3",[t._v(t._s(t.group.name)+" | "+t._s(t.user.nickname))]),n("div",[t.isAdmin?n("button",{staticClass:"settings",on:{click:function(e){return e.preventDefault(),t.openSettings(t.group)}}},[t._v(" settings ")]):t._e(),n("button",{on:{click:function(e){return e.preventDefault(),t.refresh(e)}}},[t._v("refresh")])])]),n("form",{staticClass:"row",on:{submit:function(e){return e.preventDefault(),t.addPost(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.post.content,expression:"post.content"}],attrs:{type:"text"},domProps:{value:t.post.content},on:{input:function(e){e.target.composing||t.$set(t.post,"content",e.target.value)}}}),n("button",{attrs:{type:"submit"}},[t._v("add post")])]),n("section",{staticClass:"group__content"},[n("div",{staticClass:"posts"},t._l(t.posts,(function(t){return n("app-post",{key:t.id,attrs:{post:t}})})),1),n("button",{on:{click:t.loadPosts}},[t._v("load more")])])])},Lt=[],$t=(n("a9e3"),{props:{id:{type:[String,Number],required:!0}},data:function(){return{page:2,post:null}},computed:{group:function(){return this.$store.getters["user/getGroup"](this.id).group},user:function(){return this.$store.getters["user/getGroup"](this.id)},posts:function(){return this.$store.getters["user/getGroup"](this.id).posts},participantId:function(){return this.$store.getters["user/getGroup"](this.id).participantId},isAdmin:function(){return this.$store.getters["user/getGroup"](this.id).group.creatorId===this.participantId}},created:function(){this.post=this.createNewPost()},mounted:function(){},methods:{createNewPost:function(){return{groupId:this.id,participantId:this.participantId,content:""}},addPost:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.group.addPost(t.post);case 3:t.post=t.createNewPost(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t.$alert.display(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},openSettings:function(t){this.openModal("groupSettings",t)},loadPosts:function(){try{this.$store.dispatch("user/fetchPosts",{id:this.id,page:this.page}),this.page++}catch(t){this.$alert.display(t)}},refresh:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("user/refreshGroup",t.id);case 1:case"end":return e.stop()}}),e)})))()}}}),Dt=$t,Gt=(n("7414"),Object(f["a"])(Dt,It,Lt,!1,null,"ed390c64",null)),Nt=Gt.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post col"},[n("h4",[t._v(t._s(t.post.author.nickname))]),n("p",[t._v(t._s(t.post.content))]),n("button",{staticClass:"post__react",on:{click:function(e){return t.react(t.post.id)}}},[t._v("react")])])},Ut=[],Vt={props:{post:{type:Object,required:!0}},methods:{react:function(){}}},Ft=Vt,Bt=(n("a4c7"),Object(f["a"])(Ft,Mt,Ut,!1,null,"6bec237a",null)),Yt=Bt.exports;r["default"].component("grid-layout",jt["GridLayout"]),r["default"].component("grid-item",jt["GridItem"]),r["default"].component("app-group",Nt),r["default"].component("app-post",Yt);var Jt={addGroup:function(){return n.e("chunk-2d0aaf16").then(n.bind(null,"12ba"))},createGroup:function(){return n.e("chunk-2d0b8e12").then(n.bind(null,"3120"))},createLayout:function(){return n.e("chunk-5082a409").then(n.bind(null,"e05c"))},findGroup:function(){return n.e("chunk-31c4cf80").then(n.bind(null,"adbf"))},groupSettings:function(){return n.e("chunk-6d494acc").then(n.bind(null,"065f"))},conversationSettings:function(){return n.e("chunk-3281e516").then(n.bind(null,"8b68"))}};function qt(t){return{methods:{openModal:function(e,n){this.$eventBus.$emit("open-modal",{component:t[e],props:n})}}}}var Ht=qt(Jt);r["default"].mixin(Ht);var Wt={inserted:function(t){t.focus()}};r["default"].directive("autofocus",Wt);var zt=n("123d"),Kt=n.n(zt),Xt=function(t,e){return function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(403!==n.status){t.next=5;break}e.dispatch("alert/display",{type:"error",text:"you are not authenticated. log in"}),location.reload(),t.next=6;break;case 5:return t.abrupt("return",e.dispatch("alert/display",n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Qt={display:Xt(J,kt)};r["default"].use(Kt.a),r["default"].config.productionTip=!1,r["default"].prototype.$eventBus=new r["default"],r["default"].prototype.$http=J,r["default"].prototype.$alert=Qt,new r["default"]({router:Rt,store:kt,render:function(t){return t(Pt)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("9c0c"),o=n.n(r);o.a},7414:function(t,e,n){"use strict";var r=n("0949"),o=n.n(r);o.a},"7a67":function(t,e,n){},"9c0c":function(t,e,n){},a4c7:function(t,e,n){"use strict";var r=n("bd6b"),o=n.n(r);o.a},bd6b:function(t,e,n){}});
//# sourceMappingURL=app.ddc94d11.js.map